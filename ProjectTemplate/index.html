<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Company Feedback System</title>
    <style>

        body {
            font-family: 'Arial', sans-serif;
            /* Updated gradient background to match ASU maroon colors */
            /* mixed gold with red*/
            background: linear-gradient(to bottom, #8C1D40, #a3555c, #b76e7a, #FFC627);
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
        }

        .titleContainer {
            position: fixed;
            top: 0;
            width: 100%;
            background: #8C1D40; /* ASU Maroon */
            color: #FFC627; /* ASU Gold */
            padding: 10px 0;
            text-align: center;
            font-size: 24px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }

        .menu a {
            color: #FFC627; /* ASU Gold */
            text-decoration: none;
            padding: 5px 10px;
            display: inline-block;
        }

        .contentContainer {
            margin-top: 50px; /* Give space for the fixed header */
            width: 100%;
            max-width: 400px; /* Adjusted for better spacing */
            box-sizing: border-box;
        }

        .login-container, .contentPanel {
            display: none; /* Initially hidden */
            flex-direction: column;
            padding: 20px;
            border: 1px solid #C1BFBF;
            border-radius: 5px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            background-color: #fff;
            margin-bottom: 20px;
        }

            .login-container button,
            .contentPanel button {
                width: 100%; /* Full width */
                padding: 10px;
                border: none;
                border-radius: 3px;
                background-color: #8C1D40; /* ASU Maroon */
                color: #FFC627; /* ASU Gold */
                font-size: 16px;
                cursor: pointer;
                transition: background-color 0.3s;
                margin-top: 10px; /* Consistent space between buttons */
            }

                /* Button hover effect */
                .login-container button:hover,
                .contentPanel button:hover {
                    background-color: #991F3D; /* A darker shade of ASU Maroon */
                }

            .login-container h2,
            .contentPanel h2 {
                color: #8C1D40; /* ASU Maroon */
                text-align: center;
                margin-bottom: 20px;
            }

        .form-group {
            margin-bottom: 15px;
        }

            .form-group label {
                display: block;
                margin-bottom: 5px;
                color: #5C6670; /* ASU Gray */
            }

            /* Ensuring inputs and textareas fit their parent containers */
            .form-group input,
            .form-group textarea {
                width: calc(100% - 20px); /* Full width - padding */
                padding: 10px;
                margin-bottom: 10px;
                border: 1px solid #C1BFBF;
                border-radius: 3px;
                box-sizing: border-box; /* Include padding in the width */
            }

        /* Ensures textareas do not overflow their parent container */
        .contentPanel textarea {
            width: 100%; /* Adjust width to fit the parent container */
            height: auto; /* Auto height based on content */
            resize: vertical; /* Allows only vertical resizing */
        }

        .hidden {
            display: none;
        }
    </style>


    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
</head>
<body>

   <!-- <div class="titleContainer">
        <div id="menu" class="menu">
<<<<<<< HEAD
            <a href="#" onclick="LogOff()">log off</a>
        </div>
    </div> -->
=======
            <a href="#" onclick="LogOff()">log off</a> -->
>>>>>>> dropdown

            <div class="contentContainer">
                <!-- Login Section -->
                <div id="login-container" class="login-container contentPanel">
                    <h2>Login</h2>
                    <form id="loginForm" onsubmit="LogOn($('#userId').val(), $('#pass').val()); return false;">
                        <div class="form-group">
                            <label for="userId">Username:</label>
                            <input type="text" id="userId" name="username" required placeholder="Enter your username">
                        </div>
                        <div class="form-group">
                            <label for="pass">Password:</label>
                            <input type="password" id="pass" name="password" required placeholder="Enter your password">
                        </div>
                        <button type="submit">Sign In</button>
                        <button type="button" onclick="showPanel('resetPasswordPanel')">Reset Password</button>
                        <br />
                        <button onclick="javascript: lazyloginHandler('supervisor');">Login as Supervisor</button>
                        <button onclick="javascript: lazyloginHandler('employee');">Login as Employee</button>
                    </form>
                </div>

                
            <!-- The Reset Password form -->
            <div id="resetPasswordPanel" class="contentPanel hidden">
                    <h2>Reset Password</h2>
                    <form id="resetPasswordForm" onsubmit="resetPasswordHandler(); return false;">
                        <div class="form-group">
                            <label for="resetUserId">Username:</label>
                            <input type="text" id="resetUserId" name="resetusername" required placeholder="Enter your username">
                        </div>
                        <div class="form-group">
                            <label for="oldPass">Old Password:</label>
                            <input type="password" id="oldPass" name="oldpassword" required placeholder="Enter your old password">
                        </div>
                        <div class="form-group">
                            <label for="newPass">New Password:</label>
                            <input type="password" id="newPass" name="newpassword" required placeholder="Enter your new password">
                        </div>
                        <button type="submit">Reset Password</button>
                        <button type="button" onclick="showPanel('login-container')">Cancel</button>
                    </form>
                </div>
              
                <!-- Supervisor Section -->
                <div id="SupervisorHome" class="contentPanel">
                    <h2>Supervisor Dashboard</h2>
                    <!-- Supervisor-specific content goes here -->
                    <a href="#" onclick="LogOff()">log off</a> <!--add log off to only show in supervisor screen-->
                    <button onclick="javascript: QuestionListHandler();">Click here to see the list of questions I have posted</button>
                    <button onclick="javascript: showPanel('SubmitQuestion')">Click here to submit a question</button>
                    <button onclick="javascript: LogOff();">Log Off</button>
                </div>

                <!-- Employee Section -->
                <div id="EmployeeHome" class="contentPanel">
                    <h2>Employee Dashboard</h2>
                    <!-- Employee-specific content goes here -->
                    <a href="#" onclick="LogOff()">log off</a>
                    <button onclick="javascript: QuestionListHandler();">Click here to see the list of questions I can answer</button>
                    <button onclick="javascript: showPanel('unsolicitedFeedback')">Click here to submit feedback</button>
                    <button onclick="javascript: LogOff();">Log Off</button>
                </div>

                <div id="QuestionList" class="contentPanel">
                    <div class="left">Question List</div>
                    <div>
                        This should be a list of questions available for the logged-in user to answer.<br />
                        If the logged-in user is a supervisor, it should be a list of questions they have posted.<br />
                        Note: does not currently check if the user has answered the question already.<br />
                        <hr />
                    </div>
                    <div id="questionListDisplay">
                        List should go here!
                    </div>
                    <button onclick="javascript: DashboardHandler();">Return to dashboard</button>
                    <button onclick="javascript: LogOff();">Log Off</button>
                </div>

                <div id="AnswerList" class="contentPanel">
                    <div class="left">Answer List</div>
                    <div>
                        Note: does not currently check if the answer is marked as reviewed.<br />
                    </div>
                    <div id="answerListDisplay">
                        List should go here!
                    </div>
                    <button onclick="javascript: DashboardHandler();">Return to dashboard</button>
                    <button onclick="javascript: LogOff();">Log Off</button>
                </div>

                <div id="SubmitQuestion" class="contentPanel">
                    <form id="postQuestionForm" onsubmit="submitQuestionHandler(); return false;">
                        <div class="left">Submit Question</div>
                        <!-- <div>
                 Character limit: questionText: 1000<br />
                 This limit is enforced but the current character count and character limit are not displayed.
             </div> -->
                        <div>
                            <textarea id="questionText" rows="10" cols="50" maxlength="1000" placeholder="Enter question..." required></textarea>
                        </div>
                        <div>
                            Days to live (enter 0 for no expiration): <input type="text" id="daysToLive" size="3" maxlength="3" placeholder="0" />
                        </div>
                        <div>
                            <button type="submit">Save</button>
                        </div>
                        <hr />
                    </form>
                    <button onclick="javascript: DashboardHandler();">Cancel</button>
                </div>

                <div id="SubmitAnswer" class="contentPanel">
                    <form it="postQuestionForm" onsubmit="submitAnswerHandler(); return false;">
                        <div class="left">Submit Question</div>
                        <div id="selectedQuestion">Question should be displayed here.</div>
                        <div>
                            Character limit: answerText: 1000<br />
                            This limit is enforced but the current character count and character limit are not displayed.
                        </div>
                        <div>
                            <textarea id="answerText" rows="10" cols="50" maxlength="1000" placeholder="Enter question..." required></textarea>
                        </div>
                        <div>
                            <button type="submit">Save</button>
                        </div>
                        <hr />
                    </form>
                    <button onclick="javascript: DashboardHandler();">Cancel</button>
                </div>

                <div id="unsolicitedFeedback" class="contentPanel">
                    <form id="unsolicitedFeedbackForm" onsubmit="UnsolicitedFeedbackHandler(); return false;">
                        <div class="left">Submit Unsolicited Feedback</div>
                        <!--<div>
                Character limits: problemArea: 20, complaint: 50, proposedSolution: 1000<br />
                These limits are enforced but the current character counts and character limits are not displayed.
            </div> -->
                        <!-- Problem Area dropdown-->
                        <div>
                            Problem Area: <select id="problemArea" required></select><!--Changed to select-->
                        </div>

                        <div>
                            Complaint: <input type="text" id="complaint" size="50" maxlength="50" required />
                        </div>
                        <div>
                            <textarea id="proposedSolution" rows="10" cols="50" maxlength="1000" placeholder="Enter proposed solution..." required></textarea>
                        </div>
                        <div>
                            <button type="submit">Save</button>
                        </div>
                        <hr />
                    </form>
                    <button onclick="javascript: DashboardHandler();">Return to dashboard</button>

                </div>

                <div id="accountspanel" class="contentPanel">

                </div>

                <div id="requestspanel" class="contentPanel">

                </div>
            </div>

    <!--YOUR OWN JAVASCRIPT CAN GO RIGHT HERE-->
    <script type="text/javascript">

        //this function executes once jQuery has successfully loaded and is
        //ready for business.  Usually, if we're wiring up event handlers via jQuery
        //then this is where they go.
        jQuery(function () {
            //when the app loads, check to see if the user is logged in.  If so, show their dashboard.  If not, show the logon panel to start with!
            var webMethod = "ProjectServices.asmx/IsSupervisor";
            $.ajax({
                type: "POST",
                url: webMethod,
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {
                    if (msg.d === -1) {
                        showPanel('login-container');
                    } else {
                        if (msg.d === 1) {
                            showPanel('SupervisorHome');
                        } else {
                            showPanel('EmployeeHome');
                        }
                    }
                },
                error: function (e) {
                    alert("boo...");
                }
            });
        });

        //we're using a stacked card approach for our main viewing area
        //this array holds the ids of our cards and the method
        //allows us to easly switch the interface from one to the other
        var contentPanels = ['login-container', 'SupervisorHome', 'EmployeeHome', 'QuestionList', 'AnswerList', 'SubmitAnswer', 'unsolicitedFeedback', 'SubmitQuestion', 'accountspanel', 'requestspanel'];
        //this function toggles which panel is showing, and also clears data from all panels
        // Toggles which panel is showing, and also clears data from all panels
        function showPanel(panelId) {
            clearData();
            contentPanels.forEach(function (panel) {
                var element = document.getElementById(panel);
                if (panelId == panel) {
                    element.style.display = 'flex'; // Show the requested panel
                } else {
                    element.style.display = 'none'; // Hide other panels
                }
            });
        }


        //this function clears data from all panels
        function clearData() {
            $('#questionText').val("");
            $('#problemArea').val("");
            $('#complaint').val("");
            $('#proposedSolution').val("");
            $('#answerText').val("");
            $('#daysToLive').val("");
            $("#accountsBox").empty();
            $("#requestsBox").empty();
            //clearNewAccount();
            clearLogon();
            //clearEditAccount();
            // more will be added as more panels are added
        }

        function DashboardHandler() {
            //return the user to their dashboard
            var webMethod = "ProjectServices.asmx/IsSupervisor";
            $.ajax({
                type: "POST",
                url: webMethod,
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {
                    if (msg.d === -1) {
                        showPanel('login-container');
                    } else {
                        if (msg.d === 1) {
                            showPanel('SupervisorHome');
                        } else {
                            showPanel('EmployeeHome');
                        }
                    }
                },
                error: function (e) {
                    alert("boo...");
                }
            });
        }

        // Login handler function
        function LogOn(userId, pass) {
            var webMethod = "ProjectServices.asmx/LogOn";
            var parameters = "{\"userId\":\"" + encodeURI(userId) + "\",\"pass\":\"" + encodeURI(pass) + "\"}";

            $.ajax({
                type: "POST",
                url: webMethod,
                data: parameters,
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {
                    if (msg.d === 1) {
                        alert("logon successful");
                        showPanel('SupervisorHome');
                    } else if (msg.d === 0) {
                        alert("logon successful");
                        showPanel('EmployeeHome');
                    } else {
                        alert('Login failed: Incorrect username or password.');
                    }
                    LoadAccounts();
                },
                error: function (e) {
                    alert("There was an issue with the login request.");
                }
            });
        }

        function LogOff() {
            var webMethod = "ProjectServices.asmx/LogOff";
            $.ajax({
                type: "POST",
                url: webMethod,
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {
                    if (msg.d) {
                        clearData();
                        alert("All sessions have been ended");
                        showPanel('login-container');
                        HideMenu();
                    }
                    else {
                    }
                },
                error: function (e) {
                    alert("There was an issue with the logoff request.");
                }
            });
        }

        var accountsArray;
        var admin = false;

        //resets the logon inputs
        function clearLogon() {
            $('#userId').val("");
            $('#pass').val("");
        }

        var accountWindowShowing = false;
        //and here's a function that adjusts the menu options if you're an admin or a user
        //and if you're looking at accounts or requests
        function ShowMenu() {

            $("#menu").css("visibility", "visible");
            if (admin) {
                if (accountWindowShowing) {
                    $("#adminLink").text("requests");
                }
                else {
                    $("#adminLink").text("accounts");
                }
            }
        }

        //just hides the menu
        function HideMenu() {

            $("#menu").css("visibility", "hidden");
            $("#adminLink").text("");
        }


        //a simple ajax call that passes the id to be approved
        function approveAccount(id) {
            var webMethod = "ProjectServices.asmx/ActivateAccount";
            var parameters = "{\"id\":\"" + encodeURI(id) + "\"}";

            $.ajax({
                type: "POST",
                url: webMethod,
                data: parameters,
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {
                    showPanel('requestsPanel');
                    LoadRequests();
                },
                error: function (e) {
                    alert("boo...");
                }
            });
        }

        //virtually identical with approve
        function rejectAccount(id) {
            var webMethod = "ProjectServices.asmx/RejectAccount";
            var parameters = "{\"id\":\"" + encodeURI(id) + "\"}";

            $.ajax({
                type: "POST",
                url: webMethod,
                data: parameters,
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {
                    showPanel('requestsPanel');
                    LoadRequests();
                },
                error: function (e) {
                    alert("rejectAccount error");
                }
            });
        }


        function LoadAccounts() {
            var webMethod = "ProjectServices.asmx/GetAccounts";
            $.ajax({
                type: "POST",
                url: webMethod,
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {
                    if (msg.d.length > 0) {

                        accountsArray = msg.d;

                        $("#accountsBox").empty();
                        admin = false;
                        for (var i = 0; i < accountsArray.length; i++) {
                            var acct;
                            if (accountsArray[i].userId != null) {
                                acct = "<div class='accountRow' id='acct" + accountsArray[i].id + "'>" +
                                    "<a class='nameTag' href='mailto:" + accountsArray[i].email + "'>" +
                                    accountsArray[i].firstName + " " + accountsArray[i].lastName +
                                    "</a> <a href='#' onclick='LoadAccount(" + accountsArray[i].id + ")' class='optionsTag'>edit</a></div><hr>"
                                admin = true;
                            }
                            else {
                                acct = "<div class='accountRow' id='acct" + accountsArray[i].id + "'>" +
                                    "<a class='nameTag' href='mailto:" + accountsArray[i].email + "'>" +
                                    accountsArray[i].firstName + " " + accountsArray[i].lastName +
                                    "</a></div><hr>"
                            }
                            $("#accountsBox").append(
                                acct
                            );
                        }
                    }
                    accountWindowShowing = true;
                    ShowMenu();
                },
                error: function (e) {
                    alert("loadaccounts error");
                }
            });
        }

        var currentAccount;
        //load up an account for editing
        function LoadAccount(id) {
            showPanel('editAccountPanel');
            currentAccount = null;
            //find the account with a matching id in our array
            for (var i = 0; i < accountsArray.length; i++) {
                if (accountsArray[i].id == id) {
                    currentAccount = accountsArray[i]
                }
            }
            //set up our inputs
            if (currentAccount != null) {
                $('#editLogonId').val(currentAccount.userId);
                $('#editpass').val(currentAccount.pass);
                $('#editdepartment').val(currentAccount.department);
                $('#editsupervisor').val(currentAccount.supervisor);
                $('#editissupervisor').val(currentAccount.issupervisor);
            }
        }


        // Placeholder for submitQuestionHandler function
        function submitQuestionHandler() {
            var webMethod = "ProjectServices.asmx/SubmitQuestion";
            var parameters = "{}";
            var parameters = "{\"questionText\":\"" + encodeURI($('#questionText').val()) + "\",\"daysToLive\":\"" + encodeURI($('#daysToLive').val()) + "\"}";
            //jQuery ajax method
            $.ajax({
                type: "POST",
                url: webMethod,
                data: parameters,
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {
                    var responseFromServer = msg.d;
                    if (responseFromServer > 0) {
                        alert("Question submitted successfully");
                        showPanel('SupervisorHome');
                    }
                    else {
                        alert("Feedback submission failed");
                    }
                },

                error: function (e) {
                    alert("this code will only execute if javascript is unable to access the webservice");
                }
            });
        }

        // Placeholder for unsolicitedFeedbackHandler function
        function UnsolicitedFeedbackHandler() {
            var webMethod = "ProjectServices.asmx/UnsolicitedFeedback";
            var parameters = "{}";
            var parameters = "{\"problemArea\":\"" + encodeURI($('#problemArea').val()) + "\",\"complaint\":\"" + encodeURI($('#complaint').val()) + "\",\"proposedSolution\":\"" + encodeURI($('#proposedSolution').val()) + "\"}";

            //jQuery ajax method
            $.ajax({
                type: "POST",
                url: webMethod,
                data: parameters,
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {
                    var responseFromServer = msg.d;
                    if (responseFromServer > 0) {
                        alert("Feedback submitted successfully");
                        showPanel('EmployeeHome');
                    }
                    else {
                        alert("Feedback submission failed");
                    }
                },
                error: function (e) {
                    alert("this code will only execute if javascript is unable to access the webservice");
                }
            });
        }

        // Added this function for Dropdown menu
        // Populate Problem Areas Dropdown (New Function)
        function populateProblemAreasDropdown() {
            var webMethod = "ProjectServices.asmx/GetProblemAreas";
            $.ajax({
                type: "POST",
                url: webMethod,
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (response) {
                    var dropdown = $('#problemArea');
                    dropdown.empty(); // Clear existing options
                    dropdown.append($('<option></option>').attr('value', '').text('Select a problem area'));
                    $.each(response.d, function (key, value) {
                        dropdown.append($('<option></option>').attr('value', value).text(value));
                    });
                },
                error: function (e) {
                    console.log("Error fetching problem areas: ", e);
                }
            });
        }

        // Call populateProblemAreasDropdown when the page loads
        $(document).ready(function () {
            populateProblemAreasDropdown();
        });

        // Modified UnsolicitedFeedbackHandler to use problemArea dropdown value
        function UnsolicitedFeedbackHandler() {
            var problemArea = $('#problemArea').val(); // Get selected problem area
            var complaint = $('#complaint').val();
            var proposedSolution = $('#proposedSolution').val();
            // AJAX request remains the same...
        }

        // Adds event listeners to forms
        $('#postQuestionForm').submit(function (e) {
            e.preventDefault(); // Prevent the default form submission
            submitQuestionHandler();
        });

        $('#unsolicitedFeedbackForm').submit(function (e) {
            e.preventDefault(); // Prevent the default form submission
            unsolicitedFeedbackHandler();
        });

        //this is to display questions available to be answered or reviewed
        function QuestionListHandler() {
            var webMethod = "ProjectServices.asmx/IsSupervisor";
            $.ajax({
                type: "POST",
                url: webMethod,
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {
                    issupervisor = msg.d;
                    var webMethod2 = "ProjectServices.asmx/GetQuestions";
                    $.ajax({
                        type: "POST",
                        url: webMethod2,
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        success: function (msg) {
                            if (msg.d.length > 0) {
                                $("#questionListDisplay").empty();
                                for (var i = 0; i < msg.d.length; i++) {
                                    if (issupervisor == 1) {
                                        question = "<div class='questionRow' id='questR" + msg.d[i].id + "'>"
                                            + "<span class='questionText'>" + msg.d[i].question + "</span><br /> <span class='expiryDate'>Expiry Date: "
                                            + msg.d[i].expiryDate.split(' ')[0] + " </span> <br /> <span class='optionsTag'><a href='#' onclick='AnswerListHandler("
                                            + msg.d[i].id + ")'> review responses</a></span> </div> <hr>";
                                    }
                                    else {
                                        if (i == 3) {
                                            try {
                                                question = "<div class='questionRow' id='questMore'><span class='questionText'> You have " + (msg.d.length - i) +
                                                    " more questions available.  Please respond to the above questions first.</span></div> <hr>";
                                                $("#questionListDisplay").append(question);
                                            }
                                            finally {
                                                return;
                                            }
                                        }
                                        question = "<div class='questionRow' id='questR" + msg.d[i].id + "'>" + "<span class='questionText'>" + msg.d[i].question
                                            + "<br /> <span class='expiryDate'>Expiry Date: " + msg.d[i].expiryDate.split(' ')[0] + "</span>"
                                            + "</span><br /> <span class='optionsTag'><a href='#' onclick='AnswerHandler(" + msg.d[i].id + ")'>respond (NYI)</a> </div> <hr>";
                                    }
                                    $("#questionListDisplay").append(question);
                                }
                            }
                        },
                        error: function (e) {
                            alert("boo...2");
                        },
                        complete: function () {
                            showPanel("QuestionList");
                        }
                    });
                },
                error: function (e) {
                    alert("boo...");
                }
            });
        }

        //this is to display answers available to be reviewed
        function AnswerListHandler(questionID) {
            showPanel("AnswerList");
            var webMethod = "ProjectServices.asmx/GetAnswers";
            var parameters = "{\"questionID\":\"" + questionID + "\"}";

            $.ajax({
                type: "POST",
                url: webMethod,
                data: parameters,
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {
                    if (msg.d.length > 0) {
                        $("#answerListDisplay").empty();
                        for (var i = 0; i < msg.d.length; i++) {
                            answer = "<div class='answerRow' id='questR" + msg.d[i].id + "'>" +
                                "<span class='answerText'>" + msg.d[i].answer +
                                "</span> <span class='optionsTag'><a href='#' onclick='AnswerHandler(" + msg.d[i].id + ")'>mark as reviewed (not implemented)</a></div> <hr>";
                            $("#answerListDisplay").append(answer);
                        }
                    }
                },
                error: function (e) {
                    alert("boo...");
                }
            });
        }

         // Reset Password Handler
         function resetPasswordHandler() {
            var userId = $('#resetUserId').val();
            var oldPass = $('#oldPass').val();
            var newPass = $('#newPass').val();

            // Construct the web method endpoint
            var webMethod = "ProjectServices.asmx/PasswordReset";
            // Prepare the data to be sent in the request
            var parameters = "{\"userid\":\"" + encodeURI(userId) + "\",\"pass\":\"" + encodeURI(oldPass) + "\",\"newpass\":\"" + encodeURI(newPass) + "\"}";

            // Makes the AJAX call
            $.ajax({
                type: "POST",
                url: webMethod,
                contentType: "application/json; charset=utf-8",
                data: parameters,
                dataType: "json",
                success: function (response) {
                    if (response.d) {
                        alert("Password successfully reset. Please log in with your new password.");
                        // Optionally, hide the reset password panel and show the login panel again
                        showPanel('login-container');
                    } else {
                        alert("Failed to reset password. Please check your details and try again.");
                    }
                },
                error: function () {
                    alert("Error processing your request. Please try again later.");
                }
            });
        }

        // Attached the reset password form submit event handler
        $('#resetPasswordForm').submit(function (e) {
            e.preventDefault(); // Prevent the default form submission
            resetPasswordHandler();
        });

        // added show panel to make sure password reset page shows
        function showPanel(panelId) {
            var panels = ['login-container', 'resetPasswordPanel', 'SupervisorHome', 'EmployeeHome', 'QuestionList', 'AnswerList', 'SubmitAnswer', 'unsolicitedFeedback', 'SubmitQuestion', 'accountspanel', 'requestspanel'];
            panels.forEach(function (panel) {
                var element = document.getElementById(panel);
                if (element) {
                    if (panelId === panel) {
                        element.style.display = 'flex'; // Make sure the correct panel is shown
                    } else {
                        element.style.display = 'none'; // Hide all other panels
                    }
                } else {
                    console.error("Panel not found: ", panel);
                }
            });
        }


        // NOTE THIS IS ONLY HERE BECAUSE I AM A LAZY DEVELOPER AND GOT TIRED OF TYPING IN CREDENTIALS
        // THIS WILL NEED TO BE DELETED BEFORE THE PROJECT IS SUBMITTED
        function lazyloginHandler(role) {
            var webMethod = "ProjectServices.asmx/Login";
            var parameters = "{\"role\":\"" + role + "\"}";

            $.ajax({
                type: "POST",
                url: webMethod,
                data: parameters,
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {
                    if (msg.d === 1) {
                        showPanel('SupervisorHome')
                    } else if (msg.d === 0) {
                        showPanel('EmployeeHome')
                    } else {
                        alert('Login failed: Incorrect username or password.');
                    }
                },
                error: function (e) {
                    alert("boo...hiss");
                }
            });
        }

    </script>
</body>
</html>
















